<app-navbar></app-navbar>

<div class="pt-24 px-4 max-w-5xl mx-auto">
  <h2 class="text-2xl font-bold mb-4">Lista de Livros</h2>
   <div class="mb-6 pt-4">
    <label for="filtrotitulo" class="block text-md font-medium text-gray-700">Filtrar por título:</label>
     <input
    type="text"
    [(ngModel)]="filtro"
    placeholder="Buscar por título..."
    class="border border-gray-300 rounded px-3 py-2 mb-4 w-full mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"
  />
  </div>
  
  <div class="overflow-x-auto">
    <table class="min-w-full bg-white border border-gray-300">
      <thead>
        <tr>
          <th class="py-2 px-4 border-b-2 border-gray-300 text-left text-sm font-semibold text-gray-700">
            ID
          </th>
          <th class="py-2 px-4 border-b-2 border-gray-300 text-left text-sm font-semibold text-gray-700">
            Titulo
          </th>
          <th class="py-2 px-4 border-b-2 border-gray-300 text-left text-sm font-semibold text-gray-700">
            Autor
          </th>
          <th class="py-2 px-4 border-b-2 border-gray-300 text-left text-sm font-semibold text-gray-700">
            Ano
          </th>
          <th class="py-2 px-4 border-b-2 border-gray-300 text-left text-sm font-semibold text-gray-700">
            Genero
          </th>
          <th class="py-2 px-4 border-b-2 border-gray-300 text-center text-sm font-semibold text-gray-700">
            Ações
          </th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let livro of livrosFiltrados">
          <td class="py-2 px-4 border-b border-gray-200">{{ livro.id }}</td>
          <td class="py-2 px-4 border-b border-gray-200">{{ livro.titulo | uppercase }}</td>
          <td class="py-2 px-4 border-b border-gray-200">{{ livro.autor }}</td>
          <td class="py-2 px-4 border-b border-gray-200">{{ livro.ano }}</td>
          <td class="py-2 px-4 border-b border-gray-200">{{ livro.genero }}</td>
          <td class="py-2 px-4 border-b border-gray-200 text-center">
            <button [routerLink]="['/detalhes', livro.id]" 
              class="px-2 py-1 bg-green-500 text-white text-sm font-semibold rounded hover:bg-yellow-600 focus:outline-none focus:bg-yellow-600 mr-2">
              Detalhes
            </button>
            <button [routerLink]="['/formulario', livro.id]"
              class="px-2 py-1 bg-yellow-500 text-white text-sm font-semibold rounded hover:bg-yellow-600 focus:outline-none focus:bg-yellow-600 mr-2">
              Editar
            </button>
<button (click)="excluirLivro(livro.id)"
  class="px-2 py-1 bg-red-500 text-white text-sm font-semibold rounded hover:bg-red-600 focus:outline-none focus:bg-red-600">
  Excluir
</button>
          </td>
        </tr>
      </tbody>
      <tfoot>
        <tr class="bg-gray-100">
          <td colspan="6" class="py-2 px-4 border-t border-gray-300 text-right font-bold text-gray-700">
            Número de produtos: {{ livros.length }}
          </td>
        </tr>
      </tfoot>
    </table>
  </div>
  <div class="flex justify-between mt-6">
    <button (click)="paginaAnterior()" class="px-4 py-2 bg-gray-200 rounded hover:bg-gray-300" [disabled]="paginaAtual === 0">
      Anterior
    </button>
    <button (click)="proximaPagina()" class="px-4 py-2 bg-gray-200 rounded hover:bg-gray-300" 
      [disabled]="(paginaAtual + 1) * itensPorPagina >= livros.length">
      Próxima
    </button>
  </div>
</div>
